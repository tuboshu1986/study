<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>æ ‘</title>
    <script type="text/javascript" src="global/zTree_v3/js/jquery-1.4.4.min.js"></script>
    <script type="text/javascript" src="global/zTree_v3/js/jquery.ztree.all.js"></script>

    <link rel="stylesheet" type="text/css" href="global/zTree_v3/css/zTreeStyle/zTreeStyle.css"/>
    <link rel="stylesheet" type="text/css" href="global/zTree_v3/css/demo.css"/>

</head>
<body>

<ul id="tree" class="ztree"></ul>

<script>
    $.fn.zTree.init($("#tree"), {
        async:{
            enable:true,
            dataType:"json",
            dataFilter:function(treeId, parentNode, responseData){
                responseData = responseData.map(function(item){
                    item.open = true;
                    return item;
                });

                return responseData;
            },
            url:"/test/tree"
        },
        data:{
            simpleData:{
                enable:true,
                idKey:"id",
                pIdKey:"pId",
                rootPId:null
            }
        },
        callback:{
            onRightClick:function(event, id, node){
                window.localStorage.setItem("pid", node.id);
                window.localStorage.setItem("pname", node.name);
                window.open("/page/test/edit.html");
            },
            onClick:function(event, id, node){
                window.localStorage.setItem("id", node.id);
                window.open("/page/test/edit.html");
            }
        }
    });

</script>

</body>
</html>